# -*- coding: utf-8 -*-
"""Untitled1.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1FdmbrUq93mvHr1-QFntO41aI7wVKy9Sx
"""

import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
import zipfile
import io


plt.style.use('seaborn-v0_8-darkgrid')
sns.set_palette('viridis')


from google.colab import files
uploaded = files.upload()

import os
print("Arquivos disponíveis no ambiente:")
print(os.listdir())


filename = list(uploaded.keys())[0]


with zipfile.ZipFile(io.BytesIO(uploaded[filename]), 'r') as z:

    csv_filename = [f for f in z.namelist() if f.endswith('.csv')][0]
    with z.open(csv_filename) as f:
        df = pd.read_csv(f)

df.columns = df.columns.str.strip()

print("Visão geral do dataset:")
print(df.head(), "\n")
print("Info do dataset:")
print(df.info(), "\n")

df_sel = df[['Hero', 'Pick Rate, %', 'Damage / 10min', 'Win Rate, %', 'Deaths / 10min' , 'Role']]
print("Colunas selecionadas:")
print(df_sel.head(), "\n")


df_sel['Final Blows / 10min'] = df_sel['Win Rate, %'] / df_sel['Pick Rate, %']
df_sel['Pick Rate, %'] = df_sel['Final Blows / 10min'] / df_sel['Damage / 10min']
print("Nova coluna criada:")
print(df_sel[['Hero', 'Pick Rate, %', 'Win Rate, %', 'Final Blows / 10min']].head(), "\n")


grouped = df_sel.groupby('Role')['Win Rate, %'].mean().sort_values(ascending=False)
print("Média da Win Rate por Role:")
print(grouped, "\n")


plt.figure(figsize=(8,5))
grouped.plot(kind='bar')
plt.title("Taxa de vitória média (Win Rate) por Função (Role)")
plt.xlabel("Função (Role)")
plt.ylabel("Win Rate médio (%)")
plt.xticks(rotation=45)
plt.tight_layout()
plt.show()


plt.figure(figsize=(8,5))
sns.scatterplot(data=df_sel, x='Pick Rate, %', y='Damage / 10min', hue='Deaths / 10min')
plt.title("Relação entre Taxa de escolha, Dano e Mortes a cada 10 min")
plt.xlabel("Taxa de Escolha")
plt.ylabel("Dano")
plt.legend(title="Mortes")
plt.tight_layout()
plt.show()